<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jouw Dropshipping Shop</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
<header class="p-4 bg-gray-800 flex justify-between items-center">
<h1 class="text-xl font-bold">Dropship Store</h1>
<button id="import-aliexpress" class="px-4 py-2 bg-blue-500 rounded">Importeer van AliExpress</button>
</header>
<main class="p-4">
<div id="grid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5"></div>
</main>
<script>
const CONFIG = {
  currencySymbol: 'â‚¬',
  aliexpress: {
    // Test API: haalt random producten op (dummy)
    baseUrl: 'https://fakestoreapi.com/products',
    map: (item) => ({
      id: String(item.id),
      title: item.title,
      description: item.description,
      price: Number(item.price),
      image: item.image,
      createdAt: Date.now()
    })
  }
};

function formatPrice(n) { return `${CONFIG.currencySymbol}${n.toFixed(2).replace('.', ',')}`; }

function renderGrid(products) {
  const grid = document.getElementById('grid');
  grid.innerHTML = '';
  products.forEach(p => {
    const card = document.createElement('div');
    card.className = 'bg-gray-800 p-4 rounded shadow';
    card.innerHTML = `
      <img src="${p.image}" alt="${p.title}" class="w-full h-48 object-cover rounded">
      <h2 class="mt-2 font-bold">${p.title}</h2>
      <p class="text-sm text-gray-400">${p.description.substring(0,60)}...</p>
      <p class="mt-1 font-bold">${formatPrice(p.price)}</p>
    `;
    grid.appendChild(card);
  });
}

async function importAliExpress() {
  try {
    const res = await fetch(CONFIG.aliexpress.baseUrl);
    const data = await res.json();
    const products = data.map(CONFIG.aliexpress.map);
    renderGrid(products);
  } catch (e) {
    console.error(e);
    alert('Fout bij ophalen van producten');
  }
}

document.getElementById('import-aliexpress').addEventListener('click', importAliExpress);
</script>
</body>
</html>
